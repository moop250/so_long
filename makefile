define HEADER

⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠂⠂⢄
⠀⠀⠀⠀⠀⠀⠀⠀⢠⣾⣿⣿⣿⣤⡀⠀⠀⠀⠀⢀⠂⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠊⠀⠀⠀⠀⠑⡀
⠀⠀⠀⠀⠀⠀⠀⠀⣾⣿⣿⣻⡿⣿⣿⣦⡀⠀⠀⢄⠁⠢⠀⠀⠀⠀⠀⠀⠀⠀⠀⡐⠀⠀⠀⠀⠀⠀⠀⢐
⠀⠀⠀⠀⠀⠀⠀⠀⣿⣷⣿⣟⣿⣿⣻⣿⣿⣷⣀⠢⠀⠀⠁⠢⠀⢄⠀⠀⠀⠀⢀⠂⠀⠀⠀⠀⠀⠀⠀⠠⡁
⠀⠀⠀⠀⠀⠀⠀⢀⢸⣿⣾⣿⣽⣯⣿⣯⡿⠿⠟⠷⠀⠀⠀⠀⠀⠀⠈⠂⡌⠢⡐⠀⠀⠀⠀⠀⠀⠀⠀⠠⡁
⠀⠀⠀⠀⠀⠀⠀⠈⢿⡿⣷⣿⠽⠋⠃⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢂⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠢⠈⢄
⠀⠀⢄⠀⠀⠀⠀⠀⠶⠿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠄⠐⠠⠀⠀⡈⠢⡀⠀⠀⠀⠠⠁⠀⠀⠑⢄
⠀⠀⠐⡈⠁⠁⠈⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠑⢄⠀⠀⢀⠂⠀⠈⠢⡀⠀⡊⠀⠀⠀⠀⠀⢂⠀
⠀⠀⠀⠢⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠔⠀⢀⢀⠂⠀⠀⠀⠀⠱⠀⠀⠀⠀⠀⠀⠐⠄
⠀⠀⠀⠈⢂⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢁⠉⠐⠄⡀⠀⠀⠀⠀⢀⠀⡀⢀⠁⠁⠁⠀⠀⠀⠀⠀⠀⡅⠀⠀⠀⠀⠀⠀⢀⠇
⠀⠀⠀⠀⠀⠑⢄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠡⡀⢀⠈⢂⠀⡅⠈⠀⠀⢁⠌⠀⠀⠀⠀⠀⠀⠀⠀⠀⢂⠀⠀⠀⠀⠀⠀⡰⠁⠄
⠀⠀⠀⠀⠀⠰⠀⠀⠀⠀⠀⢀⡀⣠⣤⣤⣄⡈⠀⠀⠀⢆⠐⢄⠠⠂⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠆⠀⠀⠀⠀⡰⠁⢨
⠀⠀⠀⠀⠀⢃⠀⠀⠀⠀⠀⠠⠀⠸⠀⠰⣿⢿⠀⢄⢀⠀⡀⠠⠠⠾⠶⠷⢷⣶⣤⣂⠰⠀⠄⠠⢀⢀⠈⢂⠀⠀⠀⠠⢂
⠀⠀⠀⠀⠀⠈⢄⠠⠀⠄⠔⠁⠀⠘⡀⠈⣿⣦⠂⠀⠀⠀⠀⠀⠀⡃⠀⠀⢿⣿⣧⢈⣷⡦⠀⠀⠀⠠⠘⠀⠃⠂⠄⠤⠠⠈⡢
⠀⠀⠀⠀⠀⠀⠀⠑⢄⠀⠀⠀⠀⠀⠣⢀⠌⢃⢈⢉⠐⠐⠄⠠⠀⡅⠀⠀⠹⣿⠿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢌⢁
⠀⠀⠀⠀⠀⠀⠀⠀⠀⡱⢀⠐⠀⠁⠈⠀⠂⠂⠢⠀⠑⠀⠀⠀⠁⠈⡐⠐⠀⠈⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠔⠁
⠀⠀⠀⠀⠀⠀⠀⢀⠌⠀⠆⠠⣶⣷⣷⡦⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠑⢄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠒⡁
⠀⠀⠀⠀⠀⠀⠀⠡⠠⡀⢘⠀⠙⠛⠉⠀⠀⠀⠀⠀⠀⠀⢀⣠⣄⣄⠀⠀⠀⠑⠠⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡅
⠀⠀⠀⠀⠀⠀⠀⠀⠀⢐⠁⠢⠐⠐⠂⠤⠠⡀⡀⢀⠀⠀⢀⡬⠋⠁⠀⠀⠀⠀⠀⠐⢄⠀⠀⠀⠀⠀⠀⠀⠀⢢
⠀⠀⠀⠀⠀⠀⠀⠀⠀⢨⠀⠈⠄⠀⠀⠀⠀⠀⠀⠁⠈⠂⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠁⠢⢀⠀⠀⠀⠀⠀⠀⢷⣔⡄⢀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠆⠄⡀⣈⠢⢄⡀⣀⢀⠀⡀⣀⢀⣀⣀⣀⣀⣀⠀⠀⠀⠀⠀⠀⣀⠀⠀⠁⣿⣾⣷⣿⣾⣾⣿⠿⠇⢈⠂
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⠿⠟⠂⠢⡀⠀⠿⠶⢀⠘⠋⠉⠉⠈⠁⠀⠀⠀⢀⠌
⠀⠀⠀⠀⠀⠀⠀⠀⢀⠔⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⡀⠿⠛⠛⠊⠀⠂⠈⠈⠀⠈⠐⠀⠀⠀⠁⠀⠀⠀⠀⠀⠀⠀⢀⠂
⠀⠀⠀⠀⠀⠀⢀⠐⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⢍⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠂
⠀⠀⠀⠀⠀⠀⠀⠑⢄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠄⠢⠈⠐⠁⠑⠈⠂⠑⠄⡀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠑⢄⠀⠀⠀⠀⠀⠀⠀⢀⢃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡠⠊⠀⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠢⡀
⠀⠀⠀⠀⠀⠀⠀⠀⣀⠞⠉⠐⠄⠀⠀⠀⠀⢐⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠊⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠑⠄⡀
⠀⠀⠀⠀⠀⠀⠀⡰⠀⠀⠀⠌⠀⠀⠀⠀⠀⠈⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠂⢄
⠀⠀⠀⠀⠀⠀⢐⠁⠀⠀⠨⡀⠀⠀⠀⠀⠀⠀⡣⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⢀⠀⡑⠤⡀
⠀⠀⠀⠀⠀⠀⠆⠀⠀⠀⠀⠈⠢⡀⠀⠀⠀⠀⠆⠡⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠔⠈⠀⠀⠀⠀⠀⠀⠡

     _ __ ___   ___   ___  _ __
    | '_ ` _ \ / _ \ / _ \| '_ \ 
    | | | | | | (_) | (_) | |_) |
    |_| |_| |_|\___/ \___/| .__/
                          |_|

-----------------------------------------------------------
endef
export HEADER

define HEADER_LIB


 _____                       _ _ _                _     _ _                    _
/  __ \                     (_) (_)              | |   (_) |                  (_)
| /  \/ ___  _ __ ___  _ __  _| |_ _ __   __ _   | |    _| |__  _ __ __ _ _ __ _  ___  ___
| |    / _ \| '_ ` _ \| '_ \| | | | '_ \ / _` |  | |   | | '_ \| '__/ _` | '__| |/ _ \/ __|
| \__/\ (_) | | | | | | |_) | | | | | | | (_| |  | |___| | |_) | | | (_| | |  | |  __/\__ \ 
 \____/\___/|_| |_| |_| .__/|_|_|_|_| |_|\__, |  \_____/_|_.__/|_|  \__,_|_|  |_|\___||___/
                      | |                 __/ |
                      |_|                |___/


endef
export HEADER_LIB

define HEADER_NAME


 _____                       _ _ _                          _
/  __ \                     (_) (_)                        | |
| /  \/ ___  _ __ ___  _ __  _| |_ _ __   __ _   ___  ___  | | ___  _ __   __ _
| |    / _ \| '_ ` _ \| '_ \| | | | '_ \ / _` | / __|/ _ \ | |/ _ \| '_ \ / _` |
| \__/\ (_) | | | | | | |_) | | | | | | | (_| | \__ \ (_) || | (_) | | | | (_| |
 \____/\___/|_| |_| |_| .__/|_|_|_|_| |_|\__, | |___/\___/ |_|\___/|_| |_|\__, |
                      | |                 __/ |        ______              __/ |
                      |_|                |___/        |______|            |___/

endef
export HEADER_NAME

define HEADER_BONUS


 _____                       _ _ _              ______
/  __ \                     (_) (_)             | ___ \
| /  \/ ___  _ __ ___  _ __  _| |_ _ __   __ _  | |_/ / ___  _ __  _   _ ___
| |    / _ \| '_ ` _ \| '_ \| | | | '_ \ / _` | | ___ \/ _ \| '_ \| | | / __|
| \__/\ (_) | | | | | | |_) | | | | | | | (_| | | |_/ / (_) | | | | |_| \__ \
 \____/\___/|_| |_| |_| .__/|_|_|_|_| |_|\__, | \____/ \___/|_| |_|\__,_|___/
                      | |                 __/ |
                      |_|                |___/

endef
export HEADER_BONUS

# Variables
GREEN = \033[0;32m
ORANGE = \033[38;5;208m
RESET = \033[0m

NAME = so_long
CC = gcc
CFLAGS = -Wall -Wextra -Werror
DEVFLAGS = -g3 -fsanitize=address
RM = rm -f

MINILIBX_LINUX_PATH = libs/minilibx-linux/
MINILIBX_MAC_PATH = libs/minilibx_opengl/
MINILIBX = libmlx.a
MINILIBX_PATH =

# Detect the OS
OS = $(shell uname -s)

ifeq ($(OS),Linux)
	CFLAGS += -Lmlx_linux -L/usr/lib -Imlx_linux -lXext -lX11 -lm -lz
	DEVFLAGS += -Lmlx_linux -L/usr/lib -Imlx_linux -lXext -lX11 -lm -lz
	MINILIBX_PATH = $(MINILIBX_LINUX_PATH)
endif

ifeq ($(OS),Darwin)
	CFLAGS += -framework OpenGL -framework AppKit
	DEVFLAGS += -Lmlx_linux -L/usr/lib -Imlx_linux -lXext -lX11 -lm -lz
	MINILIBX_PATH = $(MINILIBX_MAC_PATH)
endif

SRCS = srcs/so_long.c \

SUPP = srcs/init_structs.c \
		srcs/rendering.c \
		srcs/map_parsing.c \
		srcs/pathing.c \
		srcs/movement.c \
		srcs/texture_parsing.c \
		srcs/lst_funcs.c \
		srcs/animations.c \
		srcs/events.c \
		srcs/ent_parsing.c \
		srcs/enemies.c \
		srcs/enemy_lst_funcs.c \
		srcs/restart.c \
		srcs/extras.c \

MINILIBX := $(MINILIBX_PATH)$(MINILIBX)

EXTENDED_FT = libs/extended_ft/
EXFT_LIB = $(EXTENDED_FT:%=%libft.a)

#INCLUDE = -L $(EXTENDED_FT) -lft

%.o: %.c
	@printf "\tCompiling $<...\r"
	@$(CC) $(CFLAGS) -c $< -o $@
	@printf "\33[2K"

$(NAME): $(SUPP) $(SRCS) $(EXFT_LIB) $(MINILIBX)
	@echo "$$HEADER_NAME"
	@$(CC) $(SUPP) $(SRCS) $(EXFT_LIB) $(MINILIBX) $(CFLAGS) -o $(NAME)
	@echo "$(GREEN)$(NAME) built successfully!$(RESET)"

$(EXFT_LIB): $(EXTENDED_FT)makefile
	@echo "$$HEADER_LIB"
	@make -C $(EXTENDED_FT)

$(MINILIBX): $(MINILIBX_PATH)Makefile
	@make -s all -C $(MINILIBX_PATH) 

# Rules
all: $(NAME)

debug: $(SUPP) $(SRCS) $(EXFT_LIB) $(MINILIBX)
	@echo "$(ORANGE)Compiling debug $(NAME)$(RESET)"
	@$(CC) $(SUPP) $(SRCS) $(EXFT_LIB) $(MINILIBX) $(DEVFLAGS) -o $(NAME)

clean:
	@echo "$(ORANGE)Cleaning up...$(RESET)"
	@make -s fclean -C $(EXTENDED_FT)
	@make -s clean -C $(MINILIBX_PATH)
	@echo "$(GREEN)Clean up successful$(RESET)"

fclean: clean
	@echo "$(ORANGE)Full clean up...$(RESET)"
	@rm -f $(NAME)
	@echo "$(GREEN)Full clean up successful$(RESET)"

re: fclean all

header:
	@echo "$$HEADER"

.PHONY: all clean fclean re debug header